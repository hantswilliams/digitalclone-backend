FROM python:3.8    

LABEL maintainer="Hants <hantsawilliams@gmail.com>"

COPY requirements_celery.txt /requirements.txt
RUN pip install -r /requirements.txt

RUN apt-get update
RUN apt-get install -y libglib2.0-0 libsm6 libxrender1 libxext6 ffmpeg

COPY ./celery /celery_tasks
WORKDIR /celery_tasks

ENTRYPOINT celery -A tasks worker --loglevel=info